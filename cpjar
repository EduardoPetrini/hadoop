#!/bin/bash

if [ $# == 0 ]; then
        echo "Uso: ./cpjar <jarname.jar>";
        exit;
fi;

echo "Building hadoop app..."
mvn clean package assembly:single 

echo "Cleaning directory in master..."
ssh hdp@master "rm -rf /home/hdp/jar/*"

echo "Copying jar files to master..."
scp -r target/hadoop* hdp@master:/home/hdp/jar/

echo "Add "$1" to app-jar..."
ssh hdp@master "mv /home/hdp/jar/hadoop-0.0.1-jar-with-dependencies.jar /home/hdp/app-jar/$1"

echo "done";


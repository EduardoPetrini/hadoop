#!/bin/bash

echo "Building hadoop app..."
mvn clean package assembly:single

echo "Cleaning directory in master..."
ssh hdp@master "rm /home/hdp/programs/spark-1.4.1/aprioriCpaSpark.jar"

echo "Copying jar files to master..."
scp target/hadoop-0.0.1-jar-with-dependencies.jar hdp@master:/home/hdp/programs/spark-1.4.1/

echo "Renaming jar file on master"
ssh hdp@master "mv /home/hdp/programs/spark-1.4.1/hadoop-0.0.1-jar-with-dependencies.jar /home/hdp/programs/spark-1.4.1/aprioriCpaSpark.jar"

echo "done";

#!/bin/bash

if [ $# == 0 ]; then
        echo "Uso: ./cpjar <jarname.jar>";
        exit;
fi;

echo "Building hadoop app..."
mvn clean package assembly:single 

echo "Cleaning directory in master..."
ssh master "rm -rf /home/eduardo/jar/*"

echo "Copying jar files to master..."
scp -r target/hadoop* master:/home/eduardo/jar/

echo "Add "$1" to app-jar..."
ssh master "mv /home/eduardo/jar/hadoop-0.0.1-jar-with-dependencies.jar /home/eduardo/app-jar/$1"

echo "done";
